import{o as A,q as B,h as D,k as Y,f as V,r as x,j as e,F as t,C as m,b as f,l as C,A as S,s as U,t as G}from"./index-B_HkDvX-.js";import{C as w}from"./Card-BH93Bmqz.js";import{c as M,e as _,d as K}from"./branchesEndPoint-CCCld7yW.js";import{F as y}from"./appInterfaces-C6HlsS5g.js";import{g as c}from"./appFuntions-DcojXgRh.js";import{h as d}from"./appFunctions-D5LvzQzQ.js";import{R as u}from"./Row-BES_V9zK.js";const a={Name:"name",UserName:"userName",Password:"password",PrimaryNumber:"primaryNumber",HouseNo:"houseNo",StreetName:"streetName",City:"city",Pincode:"pincode",Landmark:"landmark",State:"state"},ae=()=>{const{id:h}=A(),{register:o,handleSubmit:P,reset:E,formState:{touchedFields:i,errors:s}}=B({}),[F,{isLoading:k}]=M(),[T,{data:r,isLoading:Q,isError:z}]=_(),[I,{data:O,isLoading:q}]=K(),p=D(l=>{var n;return(n=l==null?void 0:l.userInfoSlice)==null?void 0:n.userInfo});Y();const H=V();x.useRef(null),x.useState("https://as2.ftcdn.net/v2/jpg/02/41/38/73/1000_F_241387314_Sr3d8fVbXw0tWHQvZlKvbwY5YnEDC91V.jpg");const j=()=>{H("/users")},v=async l=>{try{let n={name:l.name,userName:l.userName,password:l.password,primaryNumber:l.primaryNumber,createdBy:C(S.userId),updatedBy:C(S.userId),address:{name:l.name,houseNo:l.houseNo,streetName:l.streetName,city:l.city,pincode:l.pincode,landmark:l.landmark,state:l.state},userType:y.DELIVERYAGENTS};if((p==null?void 0:p.userType)===y.FRANCHISE&&(n=await{...n,franchiseId:p==null?void 0:p.id}),h){const N=await I({params:{userId:h,userType:y.DELIVERYAGENTS},body:n});U("User Updated Successfully")}else{const N=await F(n);U("User Create Successfully")}j()}catch(n){console.log("e",n),G("Something went wrong1")}};return x.useEffect(()=>{h&&T({params:{franchiseId:h,userType:y.DELIVERYAGENTS}})},[h]),x.useEffect(()=>{var l,n,N,b,L,g;if(console.log("Test",r),r){const R={[a.Name]:r.name,[a.UserName]:r.userName,[a.PrimaryNumber]:r.primaryNumber,[a.Password]:r.password,[a.HouseNo]:(l=r==null?void 0:r.address)==null?void 0:l.houseNo,[a.City]:(n=r==null?void 0:r.address)==null?void 0:n.city,[a.Pincode]:(N=r==null?void 0:r.address)==null?void 0:N.pincode,[a.Landmark]:(b=r==null?void 0:r.address)==null?void 0:b.landmark,[a.StreetName]:(L=r==null?void 0:r.address)==null?void 0:L.streetName,[a.State]:(g=r==null?void 0:r.address)==null?void 0:g.state};E(R)}},[r]),e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"pageTile pageTitleSpace",children:h?"Update User":"Create User"}),e.jsx(w,{className:"createUser",children:e.jsx(w.Body,{className:"userFrom",children:e.jsxs(t,{onSubmit:P(v),children:[e.jsxs(u,{children:[e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Name"}),e.jsx(t.Control,{type:"text",placeholder:"Name",...o(a.Name,{required:!0})}),(s==null?void 0:s.name)&&d(i,a.Name)&&e.jsx("p",{className:"errorlabel",children:c("Name",s.name.type)})]}),e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Phone"}),e.jsx(t.Control,{type:"number",placeholder:"Phone",minLength:10,maxLength:10,...o(a.PrimaryNumber,{required:!0})}),(s==null?void 0:s.primaryNumber)&&d(i,a.PrimaryNumber)&&e.jsx("p",{className:"errorlabel",children:c("Name",s.primaryNumber.type)})]})]}),e.jsxs(u,{children:[e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"UserName"}),e.jsx(t.Control,{type:"text",placeholder:"UserName",minLength:5,maxLength:20,...o(a.UserName,{required:!0})}),(s==null?void 0:s.userName)&&d(i,a.UserName)&&e.jsx("p",{className:"errorlabel",children:c("User Name",s.userName.type)})]}),e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Password"}),e.jsx(t.Control,{type:"password",placeholder:"password",minLength:5,maxLength:10,...o(a.Password,{required:!0})}),(s==null?void 0:s.password)&&d(i,a.Password)&&e.jsx("p",{className:"errorlabel",children:c("Password",s.password.type)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"address",children:"Address"}),e.jsxs(u,{children:[e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"House No"}),e.jsx(t.Control,{type:"text",placeholder:"House No",maxLength:20,...o(a.HouseNo,{required:!0})}),(s==null?void 0:s.houseNo)&&d(i,a.HouseNo)&&e.jsx("p",{className:"errorlabel",children:c("House No",s.houseNo.type)})]}),e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Street Name"}),e.jsx(t.Control,{type:"text",placeholder:"Street",maxLength:100,...o(a.StreetName,{required:!0})}),(s==null?void 0:s.streetName)&&d(i,a.StreetName)&&e.jsx("p",{className:"errorlabel",children:c("Street Name",s.streetName.type)})]})]}),e.jsxs(u,{children:[e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"City"}),e.jsx(t.Control,{type:"text",placeholder:"City",maxLength:20,...o(a.City,{required:!0})}),(s==null?void 0:s.city)&&d(i,a.City)&&e.jsx("p",{className:"errorlabel",children:c("City",s.city.type)})]}),e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Landmark"}),e.jsx(t.Control,{type:"text",placeholder:"Landmark",maxLength:50,...o(a.Landmark,{required:!0})}),(s==null?void 0:s.landmark)&&d(i,a.Landmark)&&e.jsx("p",{className:"errorlabel",children:c("Landmark",s.landmark.type)})]})]}),e.jsxs(u,{children:[e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Pincode"}),e.jsx(t.Control,{type:"number",placeholder:"Pincode",minLength:6,maxLength:6,...o(a.Pincode,{required:!0})}),(s==null?void 0:s.pincode)&&d(i,a.Landmark)&&e.jsx("p",{className:"errorlabel",children:c("Pincode",s.pincode.type)})]}),e.jsx(m,{children:e.jsxs(m,{children:[e.jsx(t.Label,{className:"fromLabel",children:"State"}),e.jsx(t.Control,{type:"text",placeholder:"State",minLength:2,maxLength:50,...o(a.State,{required:!0,minLength:2,maxLength:50})}),(s==null?void 0:s.state)&&d(i,a.State)&&e.jsx("p",{className:"errorlabel",children:c("State",s.state.type)})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-end submitbtns",children:[e.jsx(f,{variant:"outline-secondary",className:"elementSpace",onClick:()=>{j()},children:"Cancel"}),e.jsx(f,{variant:"outline-primary",type:"submit",disabled:k||q,children:h?"Update":"Create"})]})]})})})]})};export{ae as default};
