import{q as W,f as K,o as R,r as c,j as e,F as t,C as r,b as I,l as y,A as v,s as h}from"./index-B_HkDvX-.js";import{C as S}from"./Card-BH93Bmqz.js";import{R as g}from"./Row-BES_V9zK.js";import{F as G,i as Q}from"./index-CcnOB6WK.js";import{a as O,b as _,c as $}from"./InventoryEndPoint-CZMCyaR0.js";import{g as L}from"./appFuntions-DcojXgRh.js";import{f as Y}from"./appFunctions-D5LvzQzQ.js";import{I as z}from"./Image-LWeCLA6D.js";import"./appInterfaces-C6HlsS5g.js";const le=()=>{const{register:n,handleSubmit:N,reset:u,formState:{defaultValues:a,errors:s}}=W({}),[C,{isLoading:E}]=O(),[w,{isError:U,isLoading:P}]=_(),[k,{isError:F,isLoading:B,data:q}]=$(),x=K(),{id:o}=R(),m=c.useRef(null),[f,A]=c.useState(null),[p,b]=c.useState("https://as2.ftcdn.net/v2/jpg/02/41/38/73/1000_F_241387314_Sr3d8fVbXw0tWHQvZlKvbwY5YnEDC91V.jpg"),D=()=>{var l;m!=null&&m.current&&((l=m.current)==null||l.click())},T=l=>{l.target.files&&l.target.files[0]&&(b(URL.createObjectURL(l.target.files[0])),A(l.target.files[0]),m.current.target.files="")},M=async l=>{try{let d="";f&&(d=await Y(f));const i=Object.assign(l,{createdBy:y(v.userId),updatedBy:y(v.userId),imageUrl:d||p,globalItemStatus:!!(a!=null&&a.globalItemStatus)});if(o){await w(i),h("Item Updated Succesfully"),x("/inventory");return}const j=await C(i);j!=null&&j.data&&(h("Item Added Succesfully"),x("/inventory"))}catch{h("Something went wrong!")}};return c.useEffect(()=>{o&&(async()=>{var d;try{const i=await k(o);u(i.data),b(((d=i==null?void 0:i.data)==null?void 0:d.imageUrl)||p)}catch{h("Something went wrong!")}})()},[o]),c.useEffect(()=>{},[U,P]),c.useEffect(()=>{},[F,B,q]),c.useEffect(()=>{},[a]),e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"pageTile pageTitleSpace",children:o?"Update Item":"Add Item"}),e.jsx("div",{className:"addItemPage",children:e.jsx(S,{children:e.jsx(S.Body,{children:e.jsxs(t,{onSubmit:N(M),children:[e.jsx(g,{children:e.jsx(r,{className:"img d-flex justify-content-center",children:e.jsxs("div",{className:"h-100 position-relative imgWidth imgContainer",children:[e.jsx(z,{className:"h-100 imgWidth",src:p,roundedCircle:!0}),e.jsx(G,{icon:Q,className:"editIcon",onClick:()=>{D()}}),e.jsx("input",{type:"file",ref:m,className:"fileselection",onChange:l=>T(l)})]})})}),e.jsxs("div",{className:"itemDetails",children:[e.jsx(g,{children:e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Item Name"}),e.jsx(t.Control,{type:"text",placeholder:"Item Name",...n("itemName",{required:!0})}),(s==null?void 0:s.itemName)&&e.jsx("p",{className:"errorlabel",children:L("Item Name",s==null?void 0:s.itemName.type)})]})}),e.jsxs(g,{children:[e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Price"}),e.jsx(t.Control,{type:"text",placeholder:"Price",maxLength:5,...n("itemPrice",{required:!0,pattern:{value:/^[0-9]*$/,message:"Entered value does not match email format"}})}),(s==null?void 0:s.itemPrice)&&e.jsx("p",{className:"errorlabel",children:L("Item Price",s==null?void 0:s.itemPrice.type)})]}),e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Quantity"}),e.jsxs(t.Select,{"aria-label":"Default select example",...n("itemQty",{required:!0}),children:[e.jsx("option",{value:"2Kg",children:"2KG"}),e.jsx("option",{value:"1Kg",children:"1KG"}),e.jsx("option",{value:"500 gms",children:"500 Grams"})]})]})]}),e.jsxs(g,{children:[e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Type"}),e.jsxs(t.Select,{"aria-label":"Default select example",...n("itemType",{required:!0}),children:[e.jsx("option",{value:"Leg Piece",children:"Leg Piece"}),e.jsx("option",{value:"Wings",children:"Wings"}),e.jsx("option",{value:"liver",children:"Liver"}),e.jsx("option",{value:"Boneless",children:"Boneless"}),e.jsx("option",{value:"withBone",children:"With Bone"})]})]}),e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Meat Type"}),e.jsxs(t.Select,{"aria-label":"Default select example",...n("meatType",{required:!0}),children:[e.jsx("option",{value:"Chicken",children:"Chicken"}),e.jsx("option",{value:"Mutton",children:"Mutton"}),e.jsx("option",{value:"Eggs",children:"Eggs"})]})]})]}),e.jsxs(g,{children:[e.jsxs(r,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Availability"}),e.jsx("br",{}),e.jsx(t.Check,{inline:!0,label:"Available",type:"radio",id:"inline-radio-1",...n("globalItemStatus",{required:!0}),value:"1",checked:!a||a.globalItemStatus===!0,onChange:()=>{u(a?{...a,globalItemStatus:!0}:{globalItemStatus:!0})}}),e.jsx(t.Check,{inline:!0,label:"Out of stock",type:"radio",id:"inline-radio-2",...n("globalItemStatus",{required:!0}),value:"0",checked:(a==null?void 0:a.globalItemStatus)===!1,onChange:()=>{u(a?{...a,globalItemStatus:!1}:{globalItemStatus:!1}),console.log("change2")}})]}),e.jsx(r,{})]}),e.jsxs("div",{className:"d-flex justify-content-end actionbtn",children:[e.jsx(I,{variant:"outline-secondary",className:"elementSpace",onClick:()=>{x("/inventory")},children:"Cancel"}),e.jsx(I,{variant:"outline-primary",type:"submit",disabled:E,onClick:()=>{},children:o?"Update":"Add"})]})]})]})})})})]})};export{le as default};
