import{o as I,q as D,k as R,f as T,r as N,j as e,F as t,C as l,b as g,l as f,A as C,s as P,t as A}from"./index-B_HkDvX-.js";import{C as S}from"./Card-BH93Bmqz.js";import{c as M,d as V,e as _}from"./branchesEndPoint-CCCld7yW.js";import{g as o}from"./appFuntions-DcojXgRh.js";import{h as m}from"./appFunctions-D5LvzQzQ.js";import{R as u}from"./Row-BES_V9zK.js";import"./appInterfaces-C6HlsS5g.js";const a={Name:"name",UserName:"userName",Password:"password",PrimaryNumber:"primaryNumber",HouseNo:"houseNo",StreetName:"streetName",City:"city",Pincode:"pincode",Landmark:"landmark",State:"state"},se=()=>{const{id:d}=I(),{register:c,handleSubmit:w,reset:F,formState:{defaultValues:K,errors:s,isDirty:O,dirtyFields:Q,touchedFields:i}}=D({}),[k,{isLoading:U}]=M(),[q,{isLoading:Y}]=V(),[B,{data:r,isError:z,isLoading:v}]=_();R();const E=T();N.useRef(null),N.useState("https://as2.ftcdn.net/v2/jpg/02/41/38/73/1000_F_241387314_Sr3d8fVbXw0tWHQvZlKvbwY5YnEDC91V.jpg");const y=()=>{E("/branches")},H=async n=>{try{const h={name:n.name,userName:n.userName,password:n.password,primaryNumber:n.primaryNumber,createdBy:f(C.userId),updatedBy:f(C.userId),address:{name:n.name,houseNo:n.houseNo,streetName:n.streetName,city:n.city,pincode:n.pincode,landmark:n.landmark,state:n.state}};if(d){const p=await q({params:{userId:d},body:h});P("Franchises Updated Successfully")}else{const p=await k(h);P("Franchises Create Successfully")}y()}catch(h){console.log("e",h),A("Something went wrong1")}};return N.useEffect(()=>{var n,h,p,j,b,L;try{if(r){const x={[a.Name]:r.name,[a.UserName]:r.userName,[a.PrimaryNumber]:r.primaryNumber,[a.Password]:r.password,[a.HouseNo]:(n=r==null?void 0:r.address)==null?void 0:n.houseNo,[a.City]:(h=r==null?void 0:r.address)==null?void 0:h.city,[a.Pincode]:(p=r==null?void 0:r.address)==null?void 0:p.pincode,[a.Landmark]:(j=r==null?void 0:r.address)==null?void 0:j.landmark,[a.StreetName]:(b=r==null?void 0:r.address)==null?void 0:b.streetName,[a.State]:(L=r==null?void 0:r.address)==null?void 0:L.state};F(x)}}catch(x){console.log("Err",x)}},[r]),N.useEffect(()=>{console.log("id",d),d&&B({params:{franchiseId:d}})},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"pageTile pageTitleSpace",children:[`${d?"Update":"Create"} Franchise`," "]}),e.jsx(S,{className:"createBranch",children:e.jsx(S.Body,{className:"branchFrom",children:e.jsxs(t,{onSubmit:w(H),children:[e.jsxs(u,{children:[e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Franchises Name"}),e.jsx(t.Control,{type:"text",placeholder:"Franchise Name",minLength:5,maxLength:20,...c(a.Name,{required:!0})}),(s==null?void 0:s.name)&&m(i,a.Name)&&e.jsx("p",{className:"errorlabel",children:o("Franchises Name",s.name.type)})]}),e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Phone"}),e.jsx(t.Control,{type:"number",placeholder:"Phone",minLength:10,maxLength:10,...c(a.PrimaryNumber,{required:!0})}),(s==null?void 0:s.primaryNumber)&&m(i,a.PrimaryNumber)&&e.jsx("p",{className:"errorlabel",children:o("Phone Number",s.primaryNumber.type)})]})]}),e.jsxs(u,{children:[e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"User Name"}),e.jsx(t.Control,{type:"text",placeholder:"User name",minLength:5,maxLength:20,...c(a.UserName,{required:!0})}),(s==null?void 0:s.userName)&&m(i,a.UserName)&&e.jsx("p",{className:"errorlabel",children:o("userName",s.userName.type)})]}),e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Password"}),e.jsx(t.Control,{type:"password",placeholder:"Password",minLength:5,maxLength:10,...c(a.Password,{required:!0})}),(s==null?void 0:s.password)&&m(i,a.Password)&&e.jsx("p",{className:"errorlabel",children:o("Password",s.password.type)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"address",children:"Address"}),e.jsxs(u,{children:[e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"House No"}),e.jsx(t.Control,{type:"text",placeholder:"House No",maxLength:20,...c(a.HouseNo,{required:!0})}),(s==null?void 0:s.houseNo)&&m(i,a.HouseNo)&&e.jsx("p",{className:"errorlabel",children:o("House No",s.houseNo.type)})]}),e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Street Name"}),e.jsx(t.Control,{type:"text",placeholder:"Street",maxLength:100,...c(a.StreetName,{required:!0})}),(s==null?void 0:s.streetName)&&m(i,a.StreetName)&&e.jsx("p",{className:"errorlabel",children:o("Street Name",s.streetName.type)})]})]}),e.jsxs(u,{children:[e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"City"}),e.jsx(t.Control,{type:"text",placeholder:"City",maxLength:20,...c(a.City,{required:!0})}),(s==null?void 0:s.city)&&m(i,a.City)&&e.jsx("p",{className:"errorlabel",children:o("City",s.city.type)})]}),e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Landmark"}),e.jsx(t.Control,{type:"text",placeholder:"Landmark",maxLength:50,...c(a.Landmark,{required:!0})}),(s==null?void 0:s.landmark)&&m(i,a.Landmark)&&e.jsx("p",{className:"errorlabel",children:o("Landmark",s.landmark.type)})]})]}),e.jsxs(u,{children:[e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"Pincode"}),e.jsx(t.Control,{type:"number",placeholder:"Pincode",minLength:6,maxLength:6,...c(a.Pincode,{required:!0})}),(s==null?void 0:s.pincode)&&m(i,a.Pincode)&&e.jsx("p",{className:"errorlabel",children:o("Pincode",s.pincode.type)})]}),e.jsx(l,{children:e.jsxs(l,{children:[e.jsx(t.Label,{className:"fromLabel",children:"State"}),e.jsx(t.Control,{type:"text",placeholder:"State",minLength:2,maxLength:50,...c(a.State,{required:!0})}),(s==null?void 0:s.state)&&m(i,a.State)&&e.jsx("p",{className:"errorlabel",children:o("Pincode",s.state.type)})]})})]})]}),e.jsxs("div",{className:"d-flex justify-content-end submitbtns",children:[e.jsx(g,{variant:"outline-secondary",className:"elementSpace",onClick:()=>{y()},children:"Cancel"}),e.jsx(g,{variant:"outline-primary",type:"submit",disabled:U||v,children:d?"Update":"Create"})]})]})})})]})};export{se as default};
