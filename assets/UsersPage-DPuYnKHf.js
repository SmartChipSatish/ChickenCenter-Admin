import{f as b,h as S,r as d,j as e,b as v,F as U,s as C,t as w}from"./index-B_HkDvX-.js";import{F as m,i as D,e as L}from"./index-CcnOB6WK.js";import{T as R,P as M,A as k}from"./AppDeleteModal-CCWxsZ68.js";import{C as y}from"./Card-BH93Bmqz.js";import{f as G}from"./faPlus-DNNFQylq.js";import{a as V,u as B,f as H}from"./branchesEndPoint-CCCld7yW.js";import{U as Y}from"./userTypeHook-DW0xPVE0.js";import{F as n}from"./appInterfaces-C6HlsS5g.js";import{l as _,i as T}from"./appFunctions-D5LvzQzQ.js";import{A as z}from"./loader-DtwxB0VL.js";import{p as u}from"./appConstants-CjdVTnq7.js";import"./hasClass-BxXnqlHg.js";const le=()=>{var N;const h=b(),[p,{data:t,isLoading:x,isError:j}]=V(),{data:r,isLoading:Q,isError:$}=B({params:{perPage:"",page:""}}),[A]=H(),c=S(s=>{var i;return(i=s==null?void 0:s.userInfoSlice)==null?void 0:i.userInfo}),l=Y(),[o,E]=d.useState(1),f=d.useRef(),F=(s,i)=>{console.log("deleteModalData.current",i)},P=()=>{h("create")},I=async(s,i)=>{try{const a=await A({userId:s,franchiseId:i});C("User Transfered Successfully")}catch{w("Try Again!")}};return d.useEffect(()=>{l&&(l===n.FRANCHISE&&p({params:{franchiseId:c==null?void 0:c.id,userType:n.DELIVERYAGENTS,perPage:u,page:o}}),l===n.ADMIN&&p({params:{userType:n.DELIVERYAGENTS,perPage:u,page:o}}))},[l,o]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-between pageTitleSpace",children:[e.jsx("p",{className:"pageTile",children:"Users"}),e.jsxs(v,{variant:"outline-primary",onClick:()=>{P()},children:[e.jsx(m,{icon:G.faPlus})," Add"]})]}),e.jsx("div",{className:"usersPage",children:e.jsx(y,{className:"h-100",children:e.jsxs(y.Body,{className:`${!_(x,j,t==null?void 0:t.franchises)&&"appCard"}`,children:[e.jsxs(R,{hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("p",{className:"tableTitle",children:"#"})}),e.jsx("th",{children:e.jsx("p",{className:"tableTitle",children:"Name"})}),e.jsx("th",{children:e.jsx("p",{className:"tableTitle",children:"Phone"})}),T(l)&&e.jsx("th",{children:e.jsx("p",{className:"tableTitle",children:"Franchise"})}),e.jsx("th",{children:e.jsx("p",{className:"tableTitle",children:"Address"})}),e.jsx("th",{style:{width:"150px"},children:e.jsx("p",{className:"tableTitle",children:"Actions"})})]})}),e.jsx("tbody",{children:t&&t.franchises.map((s,i)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"appRow",children:[e.jsx("td",{className:"tableItem",children:i+1}),e.jsx("td",{className:"tableItem primaryValue",children:e.jsx("p",{className:"primaryValue text-capitalize",children:s.name})}),e.jsx("td",{className:"tableItem",children:e.jsx("p",{className:"usersPage-id",children:s==null?void 0:s.primaryNumber})}),T(l)&&e.jsx("td",{className:"tableItem",children:e.jsxs(U.Select,{"aria-label":"Order Transfer",onChange:a=>{var g;I(s.id,(g=a==null?void 0:a.target)==null?void 0:g.value)},children:[e.jsx("option",{children:"Select Franchise"}),r&&(r==null?void 0:r.franchises.map(a=>e.jsx("option",{value:a._id,selected:(s==null?void 0:s.franchiseId)===a._id,children:a==null?void 0:a.name})))]})}),e.jsx("td",{className:"tableItem",children:e.jsxs("p",{className:"usersPage-id text-nowrap",children:[s==null?void 0:s.address.city,", ",s==null?void 0:s.address.state]})}),e.jsxs("td",{className:"align-middle",children:[e.jsx(m,{icon:D,className:"usersPage-actions usersPage-eye",onClick:()=>{h(`update/${s.id}`)}})," ",e.jsx(m,{icon:L,className:"itemEdit deleteIcon",onClick:()=>{var a;(a=f.current)==null||a.open(s)}})]})]},s==null?void 0:s.id)}))})]}),j&&e.jsx("div",{className:"emptyTable",children:e.jsx("p",{children:"Something went wrong!"})}),x&&e.jsx("div",{className:"emptyTable",children:e.jsx(z,{})}),((N=t==null?void 0:t.franchises)==null?void 0:N.length)===0&&e.jsx("div",{className:"emptyTable",children:"No Data Found"}),(t==null?void 0:t.totalFranchises)>10&&e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(M,{count:t.totalPages,shape:"rounded",onChange:(s,i)=>{console.log("value",i),E(i)}})})]})})}),e.jsx(k,{ref:f,title:"Do you want to delete this User?",accept:F})]})};export{le as default};
